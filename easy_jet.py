# -*- coding: utf-8 -*-
import requests
import re
from bs4 import BeautifulSoup
import json

params = {
    'originAirport': 'MXP',
    'destinationAirport': 'TSF',
    'departureDay': '12',
    'departureMonthYear': '072016',
    'isReturn': 'false',
    'returnDay': '',
    'returnMonthYear': '',
    'isFlexibleFare': 'false',
    'currencyChanged': 'false',
    'currencyChanged': 'false',
    'searchFrom': 'SearchAgain|/EN/Booking.mvc',
    '__BasketState': 'ad57db6e1b3710fd95629f2d4392ad38d19bac4bbc851c0992dc04298a805e8e24d65c7241722d2f0cbfe47bfa55fd920e2f7b912c5f8ad6309cec7038331c9e99337c8c7e48c5364c0c98caa4325f480a513fba669c885fae09cf4068129d443f2868c304314c1eaa124e364e25c9950261269c6db666c41424561b5516607225acca2dd17760ae9836521551ff31ba6c0aa6f84fd4fffd8f93e852ca3b26362b69085fb114c69c641a68d46f9f44e3870c2d032d757039164b48a4a0da29cc4991621c43a2e8973cbd0515f545ce39ee4c09e3e5c79c68bd938a96dfc1dcfe8e2b63b26f13a976680b28fea7b950c94be18d0635d858d7595e99557287e21118f4adbdf40933c10ca4da1ff6c7da656c708f1ae49671668a2510956c97a0b5cf60af77d63b3b3f3b6b7d68f77aadf3f645af45ced7bdd64587763e7d6c5f5058f76c7e39d126d63edfde46d45f13aec17a3c901b9543d83279338076f8691df953fe94018c5e808a4f48c36103238db5d9733ceedd50f939455d0f9fa52106dcd563d8e87ab3004cf9bd8b6025efe05f1cc01b9c1005ab22439b6727d190245ba053223639d958c48385f2d0837d69208bfa9d936896596fda627afcc06c023621de05ac015513bb15372eb772f759de831216a42bf200babaa311d3192785cfce5cb104865bf40b7a2eb33cabd48644582b4329d04d0e97b9313687fe4271d16ff2112645636101297a8e3df40ea4e83b91b9c0c2da5bbf929c5e928d1e28180b72cb2dda0f762e332298de96069a610e28f587a9ecb9e32b22a8abeda63494ed825026fd919a415e310a0135652905376e6f8e6825d821fcfdfdc660b7b71e32ca49025b3c10a8bd78fc267bec15331cf4404f99b87b9ea22347f90e4a9629aa3cc6dac2a253eaf9cf6e63f9ba18135dfc7a24d00060bf15fbc4d856044bb022039a26004b92661c9a95516b0d155066dea58428519b237a4be0aebfeed5e15052d7ecbfcd11c2472af4396394669e7783606bf0d9da2a6518d621a1bcd4476a8dda474614f63618b9461075db9d0fadf645abd359b5db7df7dbd0f66df055554444a37e1ea310f2f86661ed14e9ad44e8467ffffccb8599b09470072ec440f7a9aae3ff6061c2e18161b5cd5c9c35b4c6224143f486986c8f524ea26b899d1bae9d9ba0ecb96cb61ed09c5bd8762c05665c1600f1c8f5cb056cb057617baacbd432d28d18ca941997aba30aa5e5e19671aa6c836dd7c258ac8930ba6cc858991325d32a4e6812ec4ab16c0144d71c10da40753a4c1d92acefc67b1a83d4769bf143c2738a8561b510f7b6d5634a5d7709b496faaee4e4416b4f86f690b773b345a32c214d420aae3ee31dec487136c231035156ae4ed803d01536334d1c8d1d5aada30cb2ba86f7c44b720f8da1a5ba3f9c27ec123db6d690c5f4bdfc86c01ad094099fa7cec7d3c07a78867b2c0e156e7798e3389682b249bf9206f8847163efac6d9b57896acf32151dccf18ea5cd42c90363a5ea7969014991701824fb14e11dc742e798c504c204c26b08574bb3f5ba46cddbf3ca3b07a6e3431fd107712185e7c20d7a21ace72a138cc5968b556caadd88659e6059eb75ce83b791c41698bac4569a8d8925f663ee0c470485a437ca336e5189a3002477d506c4ab4c89c52be705d26c20a18d1b514aea460f3e31d574e24f38e40cb113cf719fc2d0aab4e60a8b40bba1068bd28e3dae69c43a9852f76cef924a7e43e78c924257135ac57488cf97b685d6d01cb5428f994897c4927dd515ce89232533c480efdae19e6c502be939b4215a48991e1cd8c95d0263f1ccc408d6041b64d9beecf63a536fbe6990cd2565eb30b4d5c80695ea81a038a421d7da5810fb90992688aaa066b969463502c8ec04e24d96f3fa63f432237b1ddf08f0f36635b4d3b1975acbf69154915da7d5f9b4ea22d375fbe7edd3de87eed945b7f3fd28e1ee513546796b6fe655e67c07b91ea1a577f3c94bbce85965ef8117eb70b1070fa158cf047c25457d0f58657305f74ce6fa40f790be9eeacb99e3c42140b99cef76bb5324b1e24f30a7892ce9a71c4add208f0e1a037d93a55e51fbcacc360c6baef7bb4db12e7bf85745b20ceb6d560dffb3b529170719f60d28374d5f7e181e8abda5e9fff92c9cbef92a9cbefc289cbef626ac9edca5c057d915107a48177e86a7d7c4245b3b2f287c822b46421e9efe01::::890EAC9A31F38E8999399EC1A24F70082BE6233B5CA9BA40285D844A961C63CF08'
}

result = requests.post(
    'http://www.easyjet.com/EN/FlightSelector.mvc//SearchForFlights',
    data=params)
podatki = json.loads(result.text)
print(podatki)


# zamenjamo cudne stvari, nevem tocno zakaj ampak dela....
##html = result.text\
##    .replace('\u003c', '<')\
##    .replace('\u003e', '>')\
##    .replace('\\r\\n', '')\
##    .replace('\\n', '')\
##    .replace('\\', '')
##
##soup = BeautifulSoup(html, 'html.parser')
##for tag in soup.find_all():
##    if tag.has_attr('charge-credit-full'):
##        cena = tag['charge-credit-full']
##        found = re.search(r'Departure\s*(.+?)\s', tag.text)
##        datum = found.group(1)
##        print('%s %s' % (datum, cena))
print(result.text)
